import{a as T,r,j as e,L as p}from"./index-CL3USVe2.js";import{F as L}from"./index-BtzjGJKt.js";import{a as E,b as M,c as $,d as z,e as R}from"./index-DLkvvjtg.js";import{F as q}from"./index-X5nVT_zv.js";import"./iconBase-BiHnmMnr.js";function K({Products:I,user:s,setUser:u}){const{id:g}=T(),a=I.find(t=>t.id===parseInt(g)),[o,f]=r.useState(1),[n,b]=r.useState("M"),[j,y]=r.useState(!1),[A,c]=r.useState(null),[F,l]=r.useState(!1),[i,v]=r.useState((s==null?void 0:s.cartItems)||[]),[d,w]=r.useState((s==null?void 0:s.saveItems)||[]),[N,S]=r.useState(!1),[_,k]=r.useState(!1);r.useEffect(()=>{v((s==null?void 0:s.cartItems)||[]),w((s==null?void 0:s.saveItems)||[])},[s]),r.useEffect(()=>{f(1),b("M"),S(i.some(t=>t.id===a.id)),k(d.some(t=>t.id===a.id))},[g,i,d,a.id]),r.useEffect(()=>{if(s){const t=JSON.stringify(s.cartItems)!==JSON.stringify(i),x=JSON.stringify(s.saveItems)!==JSON.stringify(d);if(t||x){const h={...s,cartItems:i,saveItems:d};localStorage.setItem("currentUser  ",JSON.stringify(h)),u(h);const U=(JSON.parse(localStorage.getItem("users"))||[]).map(C=>C.email===h.email?h:C);localStorage.setItem("users",JSON.stringify(U))}}},[i,d]);const J=()=>{localStorage.setItem("currentUser ",JSON.stringify(null)),u(null),y(!1)},m=t=>{b(t.target.innerText)},O=t=>{N?(c("Already added to cart"),l(!0)):(S(!0),v(x=>[...x,{id:t.id,title:t.title,price:t.price,thumbnail:t.thumbnail,discountPercentage:t.discountPercentage,size:n,quantity:o}]),c("Added to cart"),l(!0))},P=t=>{_?(c("Already added to save"),l(!0)):(k(!0),w(x=>[...x,{id:t.id,title:t.title,price:t.price,thumbnail:t.thumbnail,discountPercentage:t.discountPercentage,size:n,quantity:o}]),c("Added to save"),l(!0))};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-[100%] h-auto font-serif flex flex-col items-center justify-center gap-[2rem]",children:[e.jsxs("section",{className:"flex flex-row items-center py-2 px-6 justify-between w-[100%] h-auto",children:[e.jsx(p,{to:"/AllProducts",children:e.jsx("button",{className:"font-extrabold font-serif text-xl cursor-pointer hover:text-gray-700",children:"shoppey"})}),e.jsxs("div",{className:"flex flex-row items-center justify-center gap-6 text-xl",children:[e.jsx(p,{to:"/Save",children:e.jsx(E,{className:"cursor-pointer hover:text-gray-500"})}),e.jsx(p,{to:"/Cart",children:e.jsx(M,{className:"cursor-pointer hover:text-gray-500"})}),s?e.jsx("h1",{onClick:()=>y(!j),className:"cursor-pointer hover:text-gray-500",children:s.name}):e.jsx(p,{to:"/SignIU",children:e.jsx(L,{className:"cursor-pointer hover:text-gray-500"})}),s&&j&&e.jsxs("div",{className:"select-none font-bold font-serif absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-[#f1f1f1] shadow-[0.1px_0.1px_0.1rem_#dd957a] p-[2rem] rounded-md flex flex-col items-center justify-center gap-4",children:[e.jsxs("h1",{className:"text-[1.5rem] text-[#b48068] leading-5",children:["Hello, ",s==null?void 0:s.name,"!"]}),e.jsx("h1",{className:"text-[1.2rem]",children:s==null?void 0:s.email}),e.jsx("button",{onClick:J,className:"cursor-pointer text-[1rem] bg-black text-[#b48068] border-2 border-black hover:text-black hover:bg-[#b48068] hover:transition-all duration-700 ease-in-out px-[1rem] py-[0.35rem]",children:"Logout"})]}),F&&e.jsxs("div",{className:"select-none font-bold font-serif absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-[#f1f1f1] shadow-[0.1px_0.1px_0.1rem_#dd957a] p-[2rem] rounded-md flex flex-col items-center justify-center gap-4",children:[e.jsx("h1",{className:"text-[1.5rem] text-[#b48068] leading-5",children:"Alert"}),e.jsx("h1",{className:"text-[1.2rem]",children:A}),e.jsx("button",{onClick:()=>l(!1),className:"cursor-pointer text-[1rem] bg-black text-[#b48068] border-2 border-black hover:text-black hover:bg-[#b48068] hover:transition-all duration-700 ease-in-out px-[1rem] py-[0.35rem]",children:"Close"})]})]})]}),e.jsxs("section",{className:"grid grid-cols-2 max-[600px]:grid-cols-1 select-none items-center justify-center w-auto h-auto border-2 border-gray-300 rounded-lg gap-[1rem] bg-[#f7ecd6]",children:[e.jsx("div",{className:"cols-span-1 h-auto flex items-center justify-center",children:e.jsx("img",{loading:"lazy",className:"w-[20rem] h-[20rem] rounded-lg",src:a.thumbnail,alt:"itemDetail"})}),e.jsxs("div",{className:"cols-span-1 h-auto flex flex-col items-start justify-start p-6",children:[e.jsx("p",{className:"text-sm",children:a.category}),e.jsx("h1",{className:"text-[1.3rem] font-bold",children:a.title}),e.jsxs("p",{className:"mt-4 mb-4",children:["$",a.price]}),e.jsxs("div",{className:"flex flex-row item-center justify-center gap-[1rem] border-y-2 border-white p-2 mb-6 leading-4",children:[e.jsx(q,{onClick:o>=2?()=>f(o-1):null,className:"cursor-pointer hover:text-gray-700"}),e.jsx("h1",{className:"text-[1.5rem]",children:o}),e.jsx($,{onClick:o<10?()=>f(o+1):null,className:"cursor-pointer hover:text-gray-700"})]}),e.jsxs("div",{className:"flex flex-row items-center justify-center gap-[1rem] mb-6",children:[e.jsx("button",{onClick:t=>m(t),className:`w-[2.5rem] h-[2.5rem] ${n==="XS"?"bg-gray-500 text-white":""} hover:shadow-[0.5px_0.5px_3px] hover:shadow-gray-800 rounded-full shadow-[0.5px_0.5px_2px] cursor-pointer`,children:"XS"}),e.jsx("button",{onClick:t=>m(t),className:`w-[2.5rem] h-[2.5rem] ${n==="S"?"bg-gray-500 text-white":""} hover:shadow-[0.5px_0.5px_3px] hover:shadow-gray-800 rounded-full shadow-[0.5px_0.5px_2px] cursor-pointer`,children:"S"}),e.jsx("button",{onClick:t=>m(t),className:`w-[2.5rem] h-[2.5rem] ${n==="M"?"bg-gray-500 text-white":""} hover:shadow-[0.5px_0.5px_3px] hover:shadow-gray-800 rounded-full shadow-[0.5px_0.5px_2px] cursor-pointer`,children:"M"}),e.jsx("button",{onClick:t=>m(t),className:`w-[2.5rem] h-[2.5rem] ${n==="L"?"bg-gray-500 text-white":""} hover:shadow-[0.5px_0.5px_3px] hover:shadow-gray-800 rounded-full shadow-[0.5px_0.5px_2px] cursor-pointer`,children:"L"})]}),e.jsxs("div",{className:"flex flex-row items-center justify-center gap-[1rem]",children:[e.jsx("button",{onClick:()=>{s?O(a):(c("logIn to add Items"),l(!0))},className:"px-[2rem] py-[10px] rounded-md text-nowrap shadow-[0.5px_0.5px_2px] hover:shadow-[0.5px_0.5px_3px] hover:shadow-gray-800 hover:bg-gray-500 hover:text-white cursor-pointer",children:N?"Added to cart":"Add to cart"}),e.jsx("button",{onClick:()=>{s?P(a):(c("logIn to add Items"),l(!0))},className:"p-[10px] rounded-md shadow-[0.5px_0.5px_2px] hover:shadow-[0.5px_0.5px_3px] hover:shadow-gray-800 hover:bg-gray-500 hover:text-white cursor-pointer font-light text-[1.5rem]",children:_?e.jsx(z,{}):e.jsx(R,{})})]})]})]})]})})}export{K as default};
